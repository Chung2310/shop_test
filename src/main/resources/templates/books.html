<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Danh s√°ch s√°ch</title>
    <link th:href="@{/css/style.css}" rel="stylesheet" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="container mt-4">

<h2 class="mb-3">üìö Danh s√°ch s√°ch</h2>

<!-- T√¨m ki·∫øm -->
<form th:action="@{/books}" method="get" class="row g-3 mb-3">
    <div class="col-auto">
        <input type="text" name="keyword" class="form-control" placeholder="T√¨m theo ti√™u ƒë·ªÅ" th:value="${keyword}">
    </div>
    <div class="col-auto">
        <button type="submit" class="btn btn-primary">üîç T√¨m ki·∫øm</button>
    </div>
</form>

<!-- S·∫Øp x·∫øp -->
<div class="mb-3">
    <h6>S·∫Øp x·∫øp theo:</h6>
    <div class="btn-group">
        <a class="btn btn-outline-secondary"
           th:href="@{'/books?page=0&sortField=id&sortDir=' + ${reverseSortDir} + '&keyword=' + ${keyword}}">
            ID
        </a>
        <a class="btn btn-outline-secondary"
           th:href="@{'/books?page=0&sortField=title&sortDir=' + ${reverseSortDir} + '&keyword=' + ${keyword}}">
            Ti√™u ƒë·ªÅ
        </a>
        <a class="btn btn-outline-secondary"
           th:href="@{'/books?page=0&sortField=author&sortDir=' + ${reverseSortDir} + '&keyword=' + ${keyword}}">
            T√°c gi·∫£
        </a>
    </div>
</div>

<!-- Th√™m s√°ch -->
<div class="mb-3">
    <a class="btn btn-success" th:href="@{/books/add}">‚ûï Th√™m s√°ch m·ªõi</a>
</div>

<!-- B·∫£ng danh s√°ch -->
<table class="table table-bordered table-striped">
    <thead class="table-light">
    <tr>
        <th>ID</th>
        <th>Ti√™u ƒë·ªÅ</th>
        <th>T√°c gi·∫£</th>
        <th>H√†nh ƒë·ªông</th>
    </tr>
    </thead>
    <tbody>
    <tr th:each="book : ${books}">
        <td th:text="${book.id}"></td>
        <td th:text="${book.title}"></td>
        <td th:text="${book.author}"></td>
        <td>
            <a th:href="@{'/books/edit/' + ${book.id}}" class="btn btn-warning btn-sm">S·ª≠a</a>
            <a th:href="@{'/books/delete/' + ${book.id}}" class="btn btn-danger btn-sm"
               onclick="return confirm('B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën xo√° s√°ch n√†y kh√¥ng?')">Xo√°</a>
        </td>
    </tr>
    </tbody>
</table>

<!-- Ph√¢n trang -->
<nav>
    <ul class="pagination">
        <li class="page-item" th:classappend="${currentPage == 0} ? 'disabled'">
            <a class="page-link"
               th:href="@{'/books?page=' + ${currentPage - 1} + '&sortField=' + ${sortField} + '&sortDir=' + ${sortDir} + '&keyword=' + ${keyword}}">
                Trang tr∆∞·ªõc
            </a>
        </li>

        <li class="page-item disabled">
            <span class="page-link">Trang [[${currentPage + 1}]] / [[${totalPages}]]</span>
        </li>

        <li class="page-item" th:classappend="${currentPage + 1 == totalPages} ? 'disabled'">
            <a class="page-link"
               th:href="@{'/books?page=' + ${currentPage + 1} + '&sortField=' + ${sortField} + '&sortDir=' + ${sortDir} + '&keyword=' + ${keyword}}">
                Trang sau
            </a>
        </li>
    </ul>
</nav>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
